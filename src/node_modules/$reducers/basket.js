import {
  ADD_PRODUCT_TO_BASKET,
  REMOVE_PRODUCT_FROM_BASKET,
  CLEAN_BASKET
} from '$actionTypes';


let initialState = {
  products: {}
};

export default (state = initialState, {type, payload}) => {
  let prevState = {...state};
  switch (type) {
    case CLEAN_BASKET:
      prevState.products = {};
      break;

    case ADD_PRODUCT_TO_BASKET:
      let amount = prevState.products[payload.id] ? ++prevState.products[payload.id].amount : 1;
      prevState.products[payload.id] = {
        item: payload,
        amount
      };
      break;

    case REMOVE_PRODUCT_FROM_BASKET:
      delete prevState.products[payload];
      break;

    default:
      return state
  }
  return prevState;
}